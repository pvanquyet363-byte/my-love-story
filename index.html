<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>My Love Story</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Cormorant+Garamond:ital,wght@0,400;1,600&family=Great+Vibes&display=swap"
    rel="stylesheet" />

  <style>
    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(ellipse at top, #1a0a0a, #0a0505),
        radial-gradient(ellipse at bottom, #2d1b1b, #1a0a0a);
      position: relative;
      overflow-x: hidden;
      font-family: 'Cormorant Garamond', serif;
    }

    /* CANVAS BACKGROUND */
    #particles-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    /* ANIMATED GRADIENT OVERLAY */
    .gradient-overlay {
      position: fixed;
      inset: 0;
      background:
        radial-gradient(circle at 20% 50%, rgba(255, 50, 100, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 50%, rgba(255, 100, 150, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 50% 80%, rgba(255, 150, 200, 0.1) 0%, transparent 60%);
      animation: gradientShift 15s ease infinite;
      z-index: 1;
      pointer-events: none;
    }

    @keyframes gradientShift {

      0%,
      100% {
        opacity: 0.8;
        transform: scale(1);
      }

      50% {
        opacity: 1;
        transform: scale(1.1);
      }
    }

    /* FLOATING PARTICLES */
    .particle-container {
      position: fixed;
      inset: 0;
      z-index: 2;
      pointer-events: none;
      overflow: hidden;
    }

    .particle {
      position: absolute;
      border-radius: 50%;
      filter: blur(1px);
      opacity: 0;
      animation: particleFloat linear infinite;
    }

    @keyframes particleFloat {
      0% {
        transform: translateY(100vh) translateX(0) scale(0);
        opacity: 0;
      }

      10% {
        opacity: 1;
      }

      90% {
        opacity: 0.8;
      }

      100% {
        transform: translateY(-10vh) translateX(var(--drift)) scale(1);
        opacity: 0;
      }
    }

    /* OVERLAY WITH ENVELOPE */
    .overlay {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg,
          rgba(26, 10, 10, 0.95),
          rgba(45, 27, 27, 0.95));
      backdrop-filter: blur(20px);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 999;
      cursor: pointer;
    }

    /* PREMIUM ENVELOPE */
    .envelope-wrapper {
      position: relative;
      perspective: 1500px;
      margin-bottom: 60px;
    }

    .envelope-3d {
      position: relative;
      width: 380px;
      height: 260px;
      transform-style: preserve-3d;
      animation: envelope3dFloat 4s ease-in-out infinite;
      filter: drop-shadow(0 25px 50px rgba(255, 50, 100, 0.4));
    }

    @keyframes envelope3dFloat {

      0%,
      100% {
        transform: translateY(0) rotateX(5deg) rotateY(0deg);
      }

      50% {
        transform: translateY(-20px) rotateX(8deg) rotateY(5deg);
      }
    }

    .envelope-body {
      position: absolute;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #fff9f9, #ffe8e8);
      border-radius: 12px;
      box-shadow:
        inset 0 1px 40px rgba(255, 255, 255, 0.5),
        0 20px 60px rgba(0, 0, 0, 0.5);
      overflow: hidden;
    }

    .envelope-body::before {
      content: '';
      position: absolute;
      inset: 20px;
      border: 3px solid rgba(255, 100, 120, 0.2);
      border-radius: 8px;
    }

    /* ENVELOPE FLAP */
    .envelope-flap {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 52%;
      background: linear-gradient(135deg, #ffb3ba 0%, #ff8894 50%, #ff6b7a 100%);
      clip-path: polygon(0 0, 100% 0, 50% 100%);
      transform-origin: top center;
      animation: flapAnimation 3s ease-in-out infinite;
      box-shadow: 0 10px 30px rgba(255, 50, 100, 0.4);
    }

    @keyframes flapAnimation {

      0%,
      100% {
        transform: rotateX(0deg);
      }

      50% {
        transform: rotateX(-30deg);
      }
    }

    /* WAX SEAL */
    .wax-seal {
      position: absolute;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      width: 90px;
      height: 90px;
      background: radial-gradient(circle, #ff1744, #c41c3b);
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 42px;
      z-index: 5;
      box-shadow:
        0 8px 25px rgba(255, 23, 68, 0.6),
        inset 0 -5px 15px rgba(0, 0, 0, 0.3),
        inset 0 5px 15px rgba(255, 255, 255, 0.2);
      animation: sealGlow 2s ease-in-out infinite;
    }

    @keyframes sealGlow {

      0%,
      100% {
        box-shadow:
          0 8px 25px rgba(255, 23, 68, 0.6),
          0 0 30px rgba(255, 23, 68, 0.4),
          inset 0 -5px 15px rgba(0, 0, 0, 0.3);
        transform: translateX(-50%) scale(1);
      }

      50% {
        box-shadow:
          0 8px 35px rgba(255, 23, 68, 0.8),
          0 0 50px rgba(255, 23, 68, 0.6),
          inset 0 -5px 15px rgba(0, 0, 0, 0.3);
        transform: translateX(-50%) scale(1.08);
      }
    }

    /* LETTER PEEK */
    .letter-peek {
      position: absolute;
      bottom: -30px;
      left: 50%;
      transform: translateX(-50%);
      width: 280px;
      padding: 25px;
      background: linear-gradient(to bottom, #fffef9, #fff5eb);
      border-radius: 10px;
      box-shadow:
        0 10px 40px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
      animation: letterPeekFloat 4s ease-in-out infinite;
      z-index: 1;
    }

    @keyframes letterPeekFloat {

      0%,
      100% {
        transform: translateX(-50%) translateY(0);
      }

      50% {
        transform: translateX(-50%) translateY(-15px);
      }
    }

    .letter-peek-text {
      font-size: 18px;
      color: #5d3a1a;
      text-align: center;
      line-height: 1.8;
      font-style: italic;
      font-weight: 600;
    }

    /* CTA TEXT */
    .cta-container {
      text-align: center;
    }

    .cta-text {
      font-size: 32px;
      font-weight: 700;
      background: linear-gradient(135deg, #ff6b9d, #ffa0bf, #ff6b9d);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradientFlow 3s ease infinite;
      text-shadow: 0 0 30px rgba(255, 107, 157, 0.5);
      margin-bottom: 15px;
      font-family: 'Playfair Display', serif;
    }

    @keyframes gradientFlow {

      0%,
      100% {
        background-position: 0% 50%;
      }

      50% {
        background-position: 100% 50%;
      }
    }

    .tap-hint {
      font-size: 20px;
      color: #ffb3c1;
      font-family: 'Great Vibes', cursive;
      animation: tapPulse 1.5s ease-in-out infinite;
      margin-top: 10px;
    }

    @keyframes tapPulse {

      0%,
      100% {
        transform: translateY(0);
        opacity: 0.7;
      }

      50% {
        transform: translateY(-8px);
        opacity: 1;
      }
    }

    /* MAIN LETTER CONTAINER */
    .letter-container {
      position: fixed;
      inset: 0;
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 100;
      padding: 20px;
    }

    .paper {
      position: relative;
      background: linear-gradient(to bottom, #fffef9, #fff5eb);
      width: 100%;
      max-width: 650px;
      padding: 60px 45px;
      border-radius: 20px;
      box-shadow:
        0 30px 80px rgba(0, 0, 0, 0.6),
        0 0 100px rgba(255, 100, 150, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
      transform: scale(0);
      opacity: 0;
    }

    .paper::before {
      content: '';
      position: absolute;
      inset: 25px;
      border: 2px solid rgba(200, 140, 100, 0.25);
      border-radius: 15px;
      pointer-events: none;
    }

    .paper::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 100%;
      background:
        repeating-linear-gradient(0deg,
          transparent,
          transparent 30px,
          rgba(200, 140, 100, 0.03) 30px,
          rgba(200, 140, 100, 0.03) 31px);
      pointer-events: none;
      border-radius: 20px;
    }

    .paper-header {
      text-align: center;
      margin-bottom: 35px;
    }

    .paper-decoration {
      font-size: 48px;
      animation: decorationSpin 6s linear infinite;
      display: inline-block;
      filter: drop-shadow(0 2px 8px rgba(255, 100, 150, 0.4));
    }

    @keyframes decorationSpin {
      to {
        transform: rotate(360deg);
      }
    }

    .paper-title {
      font-size: 28px;
      color: #8b4513;
      margin-top: 15px;
      font-family: 'Great Vibes', cursive;
      opacity: 0;
      animation: fadeInTitle 2s ease forwards 0.5s;
    }

    @keyframes fadeInTitle {
      to {
        opacity: 1;
      }
    }

    #text {
      font-size: 26px;
      line-height: 2.2;
      color: #2c1313;
      text-align: center;
      font-style: italic;
      min-height: 320px;
      position: relative;
      z-index: 1;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }

    .signature {
      font-family: 'Great Vibes', cursive;
      text-align: right;
      margin-top: 40px;
      font-size: 38px;
      background: linear-gradient(135deg, #c2185b, #e91e63);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      opacity: 0;
      transition: opacity 2s;
      position: relative;
      z-index: 1;
    }

    /* PETALS */
    .petal {
      position: absolute;
      pointer-events: none;
      z-index: 3;
    }

    .petal-rose {
      width: 20px;
      height: 20px;
      background: radial-gradient(ellipse at center, #ff6b9d, #ff1744);
      border-radius: 50% 0 50% 0;
      opacity: 0.8;
      animation: petalFall linear infinite;
      box-shadow: 0 2px 8px rgba(255, 23, 68, 0.4);
    }

    .petal-lotus {
      width: 18px;
      height: 18px;
      background: radial-gradient(ellipse at center, #ffc1e3, #ff6b9d);
      clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
      opacity: 0.9;
      animation: petalFall linear infinite;
      box-shadow: 0 2px 8px rgba(255, 107, 157, 0.4);
    }

    .petal-mai {
      width: 16px;
      height: 16px;
      background: radial-gradient(ellipse at center, #fff176, #ffeb3b);
      clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
      opacity: 0.85;
      animation: petalFall linear infinite;
      box-shadow: 0 2px 8px rgba(255, 235, 59, 0.4);
    }

    @keyframes petalFall {
      0% {
        transform: translateY(-10vh) translateX(0) rotate(0deg);
        opacity: 0;
      }

      10% {
        opacity: 0.9;
      }

      90% {
        opacity: 0.7;
      }

      100% {
        transform: translateY(110vh) translateX(var(--drift)) rotate(var(--rotation));
        opacity: 0;
      }
    }

    /* HEARTS */
    .floating-heart {
      position: fixed;
      bottom: -50px;
      font-size: 20px;
      opacity: 0;
      animation: heartRise 5s ease-out forwards;
      filter: drop-shadow(0 0 8px rgba(255, 100, 150, 0.6));
      z-index: 4;
    }

    @keyframes heartRise {
      0% {
        transform: translateY(0) scale(0.5) rotate(0deg);
        opacity: 0;
      }

      15% {
        opacity: 1;
      }

      85% {
        opacity: 0.8;
      }

      100% {
        transform: translateY(-110vh) scale(1.2) rotate(var(--rotation));
        opacity: 0;
      }
    }

    /* LIGHT RAYS */
    .light-ray {
      position: fixed;
      top: 50%;
      left: 50%;
      width: 2px;
      height: 150px;
      background: linear-gradient(to bottom,
          transparent,
          rgba(255, 150, 200, 0.4),
          transparent);
      transform-origin: top center;
      opacity: 0;
      animation: rayRotate 8s linear infinite;
      z-index: 2;
      pointer-events: none;
    }

    @keyframes rayRotate {
      0% {
        transform: rotate(0deg);
        opacity: 0;
      }

      50% {
        opacity: 0.6;
      }

      100% {
        transform: rotate(360deg);
        opacity: 0;
      }
    }

    /* RESPONSIVE */
    @media (max-width: 768px) {
      .envelope-3d {
        width: 300px;
        height: 200px;
      }

      .wax-seal {
        width: 70px;
        height: 70px;
        font-size: 32px;
        bottom: 30px;
      }

      .letter-peek {
        width: 220px;
        padding: 20px;
      }

      .letter-peek-text {
        font-size: 16px;
      }

      .cta-text {
        font-size: 26px;
      }

      .paper {
        padding: 40px 30px;
      }

      #text {
        font-size: 22px;
        line-height: 2;
      }

      .signature {
        font-size: 32px;
      }
    }

    @media (max-width: 480px) {
      .envelope-3d {
        width: 260px;
        height: 180px;
      }

      .cta-text {
        font-size: 22px;
      }

      .paper {
        padding: 35px 25px;
      }

      #text {
        font-size: 20px;
      }
    }

    /* Khung ch·ª©a c√†nh ƒë√†o v·∫Ω b·∫±ng code */
    .cherry-branch-container {
      position: fixed;
      top: -10px;
      width: 45%;
      /* Tr√™n mobile l·∫•y g·∫ßn n·ª≠a chi·ªÅu ngang */
      max-width: 350px;
      z-index: 10;
      /* N·∫±m d∆∞·ªõi Overlay nh∆∞ng tr√™n Paper */
      pointer-events: none;
      overflow: visible;

    }

    .branch-left {
      left: -5%;
    }

    .branch-right {
      right: -5%;
      transform: scaleX(-1);
    }

    /* Gi√∫p hoa ƒë√†o tr√¥ng m∆∞·ª£t h∆°n */
    .hoa-dao path {
      filter: drop-shadow(0 0 2px rgba(255, 183, 197, 0.8));
    }

    @media (max-width: 480px) {
      .cherry-branch-container {
        width: 150px;
      }
    }

    .branch-left {
      left: 0;

    }

    .branch-right {
      right: 0;
      transform: scaleX(-1);
    }

    /* Hi·ªáu ·ª©ng c√†nh c√¢y ƒëung ƒë∆∞a nh·∫π */
    .sway {
      transform-origin: 0% 0%;
      animation: sway 6s ease-in-out infinite alternate;
    }

    @keyframes sway {
      0% {
        transform: rotate(-1deg) skewX(0deg);
      }

      100% {
        transform: rotate(4deg) skewX(1deg);
      }
    }

    .hoa-dao {
      filter: drop-shadow(0 0 3px rgba(255, 192, 203, 0.5));
      transition: all 0.5s;
    }

    @keyframes bloom {
      0% {
        opacity: 0.8;
        transform: scale(1);
      }

      100% {
        opacity: 1;
        transform: scale(1.1);
      }
    }

    .hoa-dao {
      transform-origin: center;
      animation: hoaNo 3s ease-in-out infinite;
    }

    @keyframes hoaNo {
      0% {
        transform: scale(0.9);
        opacity: 0.85;
      }

      50% {
        transform: scale(1.05);
        opacity: 1;
      }

      100% {
        transform: scale(0.95);
        opacity: 0.9;
      }
    }

    .hoa-dao path {
      animation: breathe 4s ease-in-out infinite;
    }

    @keyframes breathe {

      0%,
      100% {
        transform: scale(1);
        opacity: 0.9;
      }

      50% {
        transform: scale(1.05);
        opacity: 1;
      }
    }

    .la-dao {
      animation: laSway 5s ease-in-out infinite alternate;
    }

    @keyframes laSway {
      from {
        transform: rotate(-5deg);
      }

      to {
        transform: rotate(5deg);
      }
    }

    .hoa-dao {
      animation: hoaNo 4s ease-in-out infinite;
    }

    @keyframes hoaNo {

      0%,
      100% {
        transform: scale(0.95);
        opacity: 0.9;
      }

      50% {
        transform: scale(1.1);
        opacity: 1;
      }
    }

    /* C√ÄNH ƒê√ÄO HI·ªÇN TH·ªä R√ï R√ÄNG H∆†N */
    /* C√ÄNH ƒê√ÄO HI·ªÇN TH·ªä R√ï R√ÄNG H∆†N */
    .cherry-branch-container {
      position: fixed;
      top: -20px;
      /* k√©o l√™n cao h∆°n m·ªôt ch√∫t */
      width: 48%;
      max-width: 420px;
      z-index: 50 !important;
      /* Quan tr·ªçng: n·∫±m tr√™n canvas ph√°o hoa */
      pointer-events: none;
      overflow: visible;
    }

    .branch-left {
      left: -8%;
    }

    .branch-right {
      right: -8%;
      transform: scaleX(-1);
    }

    @media (max-width: 768px) {
      .cherry-branch-container {
        width: 45%;
        max-width: 300px;
        top: -10px;
      }
    }

    @media (max-width: 480px) {
      .cherry-branch-container {
        width: 42%;
        max-width: 220px;
      }
    }

    /* Hi·ªáu ·ª©ng l√° v√† hoa ƒë·∫πp h∆°n */
    .la-dao {
      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
      animation: laSway 6s ease-in-out infinite alternate;
    }

    @keyframes laSway {
      from {
        transform: rotate(-4deg);
      }

      to {
        transform: rotate(6deg);
      }
    }

    .hoa-dao {
      filter: drop-shadow(0 2px 6px rgba(255, 105, 180, 0.6));
      animation: hoaNo 4s ease-in-out infinite;
    }

    @keyframes hoaNo {

      0%,
      100% {
        transform: scale(0.95) rotate(0deg);
        opacity: 0.9;
      }

      50% {
        transform: scale(1.15) rotate(2deg);
        opacity: 1;
      }
    }
  </style>
</head>

<body>
  <!DOCTYPE html>
  <html lang="vi">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>My Love Story</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Cormorant+Garamond:ital,wght@0,400;1,600&family=Great+Vibes&display=swap"
      rel="stylesheet" />

    <style>
      /* ... GI·ªÆ NGUY√äN TO√ÄN B·ªò CSS C≈® C·ª¶A B·∫†N ... */
      * {
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
        margin: 0;
        padding: 0;
      }

      body {
        min-height: 100vh;
        background: radial-gradient(ellipse at top, #1a0a0a, #0a0505),
          radial-gradient(ellipse at bottom, #2d1b1b, #1a0a0a);
        position: relative;
        overflow-x: hidden;
        font-family: 'Cormorant Garamond', serif;
      }

      /* === PH·∫¶N TH√äM M·ªöI: CSS L·ªíNG ƒê√àN === */
      .lantern-holder {
        position: fixed;
        top: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 60;
        /* N·∫±m tr√™n ph√°o hoa nh∆∞ng d∆∞·ªõi Overlay */
      }

      .lantern {
        position: absolute;
        width: 50px;
        height: 45px;
        background: #ff1744;
        border-radius: 40% 40% 35% 35%;
        box-shadow: 0 0 30px rgba(255, 23, 68, 0.5), inset 0 0 15px rgba(0, 0, 0, 0.3);
        transform-origin: top center;
        animation: lanternSway 3.5s ease-in-out infinite alternate;
      }

      /* D√¢y treo */
      .lantern::before {
        content: '';
        position: absolute;
        top: -40px;
        left: 50%;
        width: 2px;
        height: 40px;
        background: #444;
      }

      /* ƒêu√¥i l·ªìng ƒë√®n */
      .lantern::after {
        content: '';
        position: absolute;
        bottom: -15px;
        left: 50%;
        transform: translateX(-50%);
        width: 4px;
        height: 15px;
        background: #ffd700;
        /* M√†u v√†ng kim */
        border-radius: 0 0 5px 5px;
      }

      @keyframes lanternSway {
        0% {
          transform: rotate(-6deg);
        }

        100% {
          transform: rotate(6deg);
        }
      }

      /* V·ªã tr√≠ c√°c l·ªìng ƒë√®n */
      .lan-1 {
        left: 5%;
        top: 0;
      }

      .lan-2 {
        left: 18%;
        top: 0;
        animation-delay: -1s;
      }

      .lan-3 {
        right: 18%;
        top: 0;
        animation-delay: -0.5s;
      }

      .lan-4 {
        right: 5%;
        top: 0;
        animation-delay: -1.5s;
      }

      /* ... TI·∫æP T·ª§C C√ÅC PH·∫¶N CSS C≈® C·ª¶A B·∫†N ... */
      #particles-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
      }

      .gradient-overlay {
        position: fixed;
        inset: 0;
        background:
          radial-gradient(circle at 20% 50%, rgba(255, 50, 100, 0.15) 0%, transparent 50%),
          radial-gradient(circle at 80% 50%, rgba(255, 100, 150, 0.15) 0%, transparent 50%),
          radial-gradient(circle at 50% 80%, rgba(255, 150, 200, 0.1) 0%, transparent 60%);
        animation: gradientShift 15s ease infinite;
        z-index: 1;
        pointer-events: none;
      }

      @keyframes gradientShift {

        0%,
        100% {
          opacity: 0.8;
          transform: scale(1);
        }

        50% {
          opacity: 1;
          transform: scale(1.1);
        }
      }

      .particle-container {
        position: fixed;
        inset: 0;
        z-index: 2;
        pointer-events: none;
        overflow: hidden;
      }

      .particle {
        position: absolute;
        border-radius: 50%;
        filter: blur(1px);
        opacity: 0;
        animation: particleFloat linear infinite;
      }

      @keyframes particleFloat {
        0% {
          transform: translateY(100vh) translateX(0) scale(0);
          opacity: 0;
        }

        10% {
          opacity: 1;
        }

        90% {
          opacity: 0.8;
        }

        100% {
          transform: translateY(-10vh) translateX(var(--drift)) scale(1);
          opacity: 0;
        }
      }

      .overlay {
        position: fixed;
        inset: 0;
        background: linear-gradient(135deg, rgba(26, 10, 10, 0.95), rgba(45, 27, 27, 0.95));
        backdrop-filter: blur(20px);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 999;
        cursor: pointer;
      }

      .envelope-wrapper {
        position: relative;
        perspective: 1500px;
        margin-bottom: 60px;
      }

      .envelope-3d {
        position: relative;
        width: 380px;
        height: 260px;
        transform-style: preserve-3d;
        animation: envelope3dFloat 4s ease-in-out infinite;
        filter: drop-shadow(0 25px 50px rgba(255, 50, 100, 0.4));
      }

      @keyframes envelope3dFloat {

        0%,
        100% {
          transform: translateY(0) rotateX(5deg) rotateY(0deg);
        }

        50% {
          transform: translateY(-20px) rotateX(8deg) rotateY(5deg);
        }
      }

      .envelope-body {
        position: absolute;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #fff9f9, #ffe8e8);
        border-radius: 12px;
        box-shadow: inset 0 1px 40px rgba(255, 255, 255, 0.5), 0 20px 60px rgba(0, 0, 0, 0.5);
        overflow: hidden;
      }

      .envelope-body::before {
        content: '';
        position: absolute;
        inset: 20px;
        border: 3px solid rgba(255, 100, 120, 0.2);
        border-radius: 8px;
      }

      .envelope-flap {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 52%;
        background: linear-gradient(135deg, #ffb3ba 0%, #ff8894 50%, #ff6b7a 100%);
        clip-path: polygon(0 0, 100% 0, 50% 100%);
        transform-origin: top center;
        animation: flapAnimation 3s ease-in-out infinite;
        box-shadow: 0 10px 30px rgba(255, 50, 100, 0.4);
      }

      @keyframes flapAnimation {

        0%,
        100% {
          transform: rotateX(0deg);
        }

        50% {
          transform: rotateX(-30deg);
        }
      }

      .wax-seal {
        position: absolute;
        bottom: 40px;
        left: 50%;
        transform: translateX(-50%);
        width: 90px;
        height: 90px;
        background: radial-gradient(circle, #ff1744, #c41c3b);
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 42px;
        z-index: 5;
        box-shadow: 0 8px 25px rgba(255, 23, 68, 0.6), inset 0 -5px 15px rgba(0, 0, 0, 0.3), inset 0 5px 15px rgba(255, 255, 255, 0.2);
        animation: sealGlow 2s ease-in-out infinite;
      }

      @keyframes sealGlow {

        0%,
        100% {
          box-shadow: 0 8px 25px rgba(255, 23, 68, 0.6), 0 0 30px rgba(255, 23, 68, 0.4), inset 0 -5px 15px rgba(0, 0, 0, 0.3);
          transform: translateX(-50%) scale(1);
        }

        50% {
          box-shadow: 0 8px 35px rgba(255, 23, 68, 0.8), 0 0 50px rgba(255, 23, 68, 0.6), inset 0 -5px 15px rgba(0, 0, 0, 0.3);
          transform: translateX(-50%) scale(1.08);
        }
      }

      .letter-peek {
        position: absolute;
        bottom: -30px;
        left: 50%;
        transform: translateX(-50%);
        width: 280px;
        padding: 25px;
        background: linear-gradient(to bottom, #fffef9, #fff5eb);
        border-radius: 10px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.8);
        animation: letterPeekFloat 4s ease-in-out infinite;
        z-index: 1;
      }

      @keyframes letterPeekFloat {

        0%,
        100% {
          transform: translateX(-50%) translateY(0);
        }

        50% {
          transform: translateX(-50%) translateY(-15px);
        }
      }

      .letter-peek-text {
        font-size: 18px;
        color: #5d3a1a;
        text-align: center;
        line-height: 1.8;
        font-style: italic;
        font-weight: 600;
      }

      .cta-container {
        text-align: center;
      }

      .cta-text {
        font-size: 32px;
        font-weight: 700;
        background: linear-gradient(135deg, #ff6b9d, #ffa0bf, #ff6b9d);
        background-size: 200% 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: gradientFlow 3s ease infinite;
        text-shadow: 0 0 30px rgba(255, 107, 157, 0.5);
        margin-bottom: 15px;
        font-family: 'Playfair Display', serif;
      }

      @keyframes gradientFlow {

        0%,
        100% {
          background-position: 0% 50%;
        }

        50% {
          background-position: 100% 50%;
        }
      }

      .tap-hint {
        font-size: 20px;
        color: #ffb3c1;
        font-family: 'Great Vibes', cursive;
        animation: tapPulse 1.5s ease-in-out infinite;
        margin-top: 10px;
      }

      @keyframes tapPulse {

        0%,
        100% {
          transform: translateY(0);
          opacity: 0.7;
        }

        50% {
          transform: translateY(-8px);
          opacity: 1;
        }
      }

      .letter-container {
        position: fixed;
        inset: 0;
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 100;
        padding: 20px;
      }

      .paper {
        position: relative;
        background: linear-gradient(to bottom, #fffef9, #fff5eb);
        width: 100%;
        max-width: 650px;
        padding: 60px 45px;
        border-radius: 20px;
        box-shadow: 0 30px 80px rgba(0, 0, 0, 0.6), 0 0 100px rgba(255, 100, 150, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.8);
        transform: scale(0);
        opacity: 0;
      }

      .paper::before {
        content: '';
        position: absolute;
        inset: 25px;
        border: 2px solid rgba(200, 140, 100, 0.25);
        border-radius: 15px;
        pointer-events: none;
      }

      .paper::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 100%;
        background: repeating-linear-gradient(0deg, transparent, transparent 30px, rgba(200, 140, 100, 0.03) 30px, rgba(200, 140, 100, 0.03) 31px);
        pointer-events: none;
        border-radius: 20px;
      }

      .paper-header {
        text-align: center;
        margin-bottom: 35px;
      }

      .paper-decoration {
        font-size: 48px;
        animation: decorationSpin 6s linear infinite;
        display: inline-block;
        filter: drop-shadow(0 2px 8px rgba(255, 100, 150, 0.4));
      }

      @keyframes decorationSpin {
        to {
          transform: rotate(360deg);
        }
      }

      .paper-title {
        font-size: 28px;
        color: #8b4513;
        margin-top: 15px;
        font-family: 'Great Vibes', cursive;
        opacity: 0;
        animation: fadeInTitle 2s ease forwards 0.5s;
      }

      @keyframes fadeInTitle {
        to {
          opacity: 1;
        }
      }

      #text {
        font-size: 26px;
        line-height: 2.2;
        color: #2c1313;
        text-align: center;
        font-style: italic;
        min-height: 320px;
        position: relative;
        z-index: 1;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
      }

      .signature {
        font-family: 'Great Vibes', cursive;
        text-align: right;
        margin-top: 40px;
        font-size: 38px;
        background: linear-gradient(135deg, #c2185b, #e91e63);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        opacity: 0;
        transition: opacity 2s;
        position: relative;
        z-index: 1;
      }

      .petal {
        position: absolute;
        pointer-events: none;
        z-index: 3;
      }

      .petal-rose {
        width: 20px;
        height: 20px;
        background: radial-gradient(ellipse at center, #ff6b9d, #ff1744);
        border-radius: 50% 0 50% 0;
        opacity: 0.8;
        animation: petalFall linear infinite;
        box-shadow: 0 2px 8px rgba(255, 23, 68, 0.4);
      }

      .petal-lotus {
        width: 18px;
        height: 18px;
        background: radial-gradient(ellipse at center, #ffc1e3, #ff6b9d);
        clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
        opacity: 0.9;
        animation: petalFall linear infinite;
        box-shadow: 0 2px 8px rgba(255, 107, 157, 0.4);
      }

      .petal-mai {
        width: 16px;
        height: 16px;
        background: radial-gradient(ellipse at center, #fff176, #ffeb3b);
        clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
        opacity: 0.85;
        animation: petalFall linear infinite;
        box-shadow: 0 2px 8px rgba(255, 235, 59, 0.4);
      }

      @keyframes petalFall {
        0% {
          transform: translateY(-10vh) translateX(0) rotate(0deg);
          opacity: 0;
        }

        10% {
          opacity: 0.9;
        }

        90% {
          opacity: 0.7;
        }

        100% {
          transform: translateY(110vh) translateX(var(--drift)) rotate(var(--rotation));
          opacity: 0;
        }
      }

      .light-ray {
        position: fixed;
        top: 50%;
        left: 50%;
        width: 2px;
        height: 150px;
        background: linear-gradient(to bottom, transparent, rgba(255, 150, 200, 0.4), transparent);
        transform-origin: top center;
        opacity: 0;
        animation: rayRotate 8s linear infinite;
        z-index: 2;
        pointer-events: none;
      }

      @keyframes rayRotate {
        0% {
          transform: rotate(0deg);
          opacity: 0;
        }

        50% {
          opacity: 0.6;
        }

        100% {
          transform: rotate(360deg);
          opacity: 0;
        }
      }

      @media (max-width: 768px) {
        .envelope-3d {
          width: 300px;
          height: 200px;
        }

        .wax-seal {
          width: 70px;
          height: 70px;
          font-size: 32px;
          bottom: 30px;
        }

        .letter-peek {
          width: 220px;
          padding: 20px;
        }

        .letter-peek-text {
          font-size: 16px;
        }

        .cta-text {
          font-size: 26px;
        }

        .paper {
          padding: 40px 30px;
        }

        #text {
          font-size: 22px;
          line-height: 2;
        }

        .signature {
          font-size: 32px;
        }
      }

      @media (max-width: 480px) {
        .envelope-3d {
          width: 260px;
          height: 180px;
        }

        .cta-text {
          font-size: 22px;
        }

        .paper {
          padding: 35px 25px;
        }

        #text {
          font-size: 20px;
        }
      }

      /* Hi·ªáu ·ª©ng l·ªìng ƒë√®n n√¢ng cao */
      .lantern {
        position: absolute;
        width: 45px;
        height: 40px;
        background: #ff1744;
        border-radius: 40% 40% 35% 35%;
        /* Hi·ªáu ·ª©ng t·ªèa s√°ng r·ª±c r·ª° */
        box-shadow: 0 0 40px rgba(255, 23, 68, 0.6),
          inset 0 0 20px rgba(0, 0, 0, 0.3);
        transform-origin: top center;
        animation: lanternSway 3s ease-in-out infinite alternate,
          lanternGlow 2s ease-in-out infinite alternate;
        /* Th√™m hi·ªáu ·ª©ng nh·∫•p nh√°y */
      }

      /* Hi·ªáu ·ª©ng nh·∫•p nh√°y √°nh n·∫øn b√™n trong */
      @keyframes lanternGlow {
        0% {
          filter: brightness(1);
          box-shadow: 0 0 30px rgba(255, 23, 68, 0.5);
        }

        100% {
          filter: brightness(1.3);
          box-shadow: 0 0 50px rgba(255, 23, 68, 0.8);
        }
      }

      /* ƒêu√¥i l·ªìng ƒë√®n (Tua rua) c√≥ hi·ªáu ·ª©ng m·ªÅm h∆°n */
      .lantern::after {
        content: '';
        position: absolute;
        bottom: -15px;
        left: 50%;
        transform: translateX(-50%);
        width: 5px;
        height: 18px;
        background: linear-gradient(to bottom, #ffd700, #ff8c00);
        border-radius: 2px;
        animation: tasselSway 3s ease-in-out infinite alternate;
        transform-origin: top center;
      }

      /* Hi·ªáu ·ª©ng ƒëung ƒë∆∞a ri√™ng cho ƒëu√¥i */
      @keyframes tasselSway {
        0% {
          transform: translateX(-50%) rotate(-10deg);
        }

        100% {
          transform: translateX(-50%) rotate(10deg);
        }
      }

      /* Th√™m c√°c v√≤ng ch·ªâ v√†ng trang tr√≠ tr√™n th√¢n l·ªìng ƒë√®n */
      .lantern-line {
        position: absolute;
        top: 0;
        left: 15%;
        width: 70%;
        height: 100%;
        border-left: 1px solid rgba(255, 215, 0, 0.3);
        border-right: 1px solid rgba(255, 215, 0, 0.3);
        border-radius: 50%;
      }

      /* --- RESPONSIVE CHO MOBILE --- */
      @media (max-width: 600px) {

        /* 1. Thu nh·ªè l·ªìng ƒë√®n */
        .lantern {
          width: 35px;
          height: 32px;
        }

        .lantern::before {
          height: 30px;
          top: -30px;
        }

        .lan-1 {
          left: 5%;
        }

        .lan-2 {
          left: 20%;
        }

        .lan-3 {
          right: 20%;
        }

        .lan-4 {
          right: 5%;
        }

        /* 2. Thu nh·ªè phong b√¨ 3D */
        .envelope-3d {
          width: 280px;
          height: 190px;
        }

        /* 3. Ch·ªânh l·∫°i mi·∫øng th∆∞ nh√¥ ra (Peek) */
        .letter-peek {
          width: 200px;
          padding: 15px;
          bottom: -20px;
        }

        .letter-peek-text {
          font-size: 14px;
          line-height: 1.5;
        }

        /* 4. Ch·ªânh l·∫°i c√†nh ƒë√†o ƒë·ªÉ kh√¥ng chi·∫øm ch·ªó */
        .cherry-branch-container {
          width: 180px;
          top: -10px;
        }

        .branch-left {
          left: -15%;
        }

        .branch-right {
          right: -15%;
        }

        /* 5. Ch·ªânh l·∫°i ch·ªØ trong th∆∞ ch√≠nh */
        .paper {
          padding: 30px 20px;
          width: 95%;
          /* Chi·∫øm g·∫ßn h·∫øt chi·ªÅu ngang */
        }

        #text {
          font-size: 18px;
          /* C·ª° ch·ªØ v·ª´a v·∫∑n m√†n h√¨nh d·ªçc */
          line-height: 1.8;
          min-height: 250px;
        }

        .paper-title {
          font-size: 22px;
        }

        .signature {
          font-size: 28px;
          margin-top: 20px;
        }
      }

      /* Fix cho m√†n h√¨nh c·ª±c nh·ªè ho·∫∑c xoay ngang */
      @media (max-height: 500px) {
        .envelope-wrapper {
          transform: scale(0.7);
          margin-bottom: 20px;
        }

        .lantern-holder {
          display: none;
          /* ·∫®n l·ªìng ƒë√®n khi m√†n h√¨nh qu√° th·∫•p ƒë·ªÉ tr√°nh r·ªëi */
        }
      }
      /* Hi·ªáu ·ª©ng ƒëung ƒë∆∞a */
      @keyframes sway {
    0%, 100% { transform: rotate(0deg); }
    50% { transform: rotate(1.5deg); }
  }

  .hoa-dao.sway {
    transform-origin: center;
    animation: sway 5s ease-in-out infinite;
  }

  .cherry-branch-container {
    width: 100%;
    max-width: 900px;
    margin: 10px auto;
  }

  .branch-right svg {
    transform: scaleX(-1);
  }
  /* HI·ªÜU ·ª®NG C√ÅNH HOA ƒê√ÄO R·ª§NG */
.falling-petal-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 3; /* Tr√™n n·ªÅn nh∆∞ng d∆∞·ªõi overlay n·∫øu c·∫ßn */
  overflow: hidden;
}

.falling-petal {
  position: absolute;
  top: -50px;
  animation: fall linear infinite;
  opacity: 0.9;
}

@keyframes fall {
  0% {
    transform: translateY(-100px) translateX(0) rotate(0deg);
    opacity: 0;
  }
  10% {
    opacity: 0.9;
  }
  90% {
    opacity: 0.9;
  }
  100% {
    transform: translateY(calc(100vh + 100px)) translateX(var(--drift)) rotate(var(--rotate));
    opacity: 0;
  }
}
    </style>
  </head>

  <body>
    <div class="lantern-holder">
      <div class="lantern lan-1"></div>
      <div class="lantern lan-2"></div>
      <div class="lantern lan-3"></div>
      <div class="lantern lan-4"></div>
    </div>
    <div class="cherry-branch-container branch-left">
  <svg viewBox="0 0 900 300" xmlns="http://www.w3.org/2000/svg" class="hoa-dao sway">
    <defs>
      <linearGradient id="branchThin" x1="0%" y1="0%" x2="100%" y2="0%">
        <stop offset="0%" stop-color="#4E342E"/>
        <stop offset="50%" stop-color="#5D4037"/>
        <stop offset="100%" stop-color="#6D4C41"/>
      </linearGradient>
      <linearGradient id="branchHighlight" x1="0%" y1="0%" x2="0%" y2="100%">
        <stop offset="0%" stop-color="rgba(255,255,255,0.2)"/>
        <stop offset="50%" stop-color="transparent"/>
      </linearGradient>
    </defs>

    <path d="M50,150 Q250,80 450,150 Q650,220 850,150" stroke="url(#branchThin)" stroke-width="18" fill="none" stroke-linecap="round"/>
    <path d="M200,140 Q160,100 180,80" stroke="#5D4037" stroke-width="10" fill="none" stroke-linecap="round"/>
    <path d="M350,150 Q310,190 290,210" stroke="#5D4037" stroke-width="9" fill="none" stroke-linecap="round"/>
    <path d="M550,150 Q590,110 570,90" stroke="#5D4037" stroke-width="10" fill="none" stroke-linecap="round"/>
    <path d="M700,155 Q740,195 720,215" stroke="#5D4037" stroke-width="9" fill="none" stroke-linecap="round"/>

    <g class="hoa-dao-group">
      <g transform="translate(150,120)">
        <circle cx="0" cy="0" r="15" fill="#FF91A4"/><circle cx="0" cy="0" r="22" fill="#FF69B4" opacity="0.4"/>
        <circle cx="-13" cy="-13" r="12" fill="#FFB6C1"/><circle cx="13" cy="-13" r="12" fill="#FFB6C1"/>
        <circle cx="-13" cy="13" r="12" fill="#FFB6C1"/><circle cx="13" cy="13" r="12" fill="#FFB6C1"/><circle cx="0" cy="0" r="8" fill="#FF1493"/>
      </g>
      <g transform="translate(300,110)">
        <circle cx="0" cy="0" r="16" fill="#FF91A4"/><circle cx="0" cy="0" r="24" fill="#FF69B4" opacity="0.4"/>
        <circle cx="-14" cy="-14" r="13" fill="#FFB6C1"/><circle cx="14" cy="-14" r="13" fill="#FFB6C1"/>
        <circle cx="-14" cy="14" r="13" fill="#FFB6C1"/><circle cx="14" cy="14" r="13" fill="#FFB6C1"/><circle cx="0" cy="0" r="9" fill="#FF1493"/>
      </g>
      <g transform="translate(480,160)">
        <circle cx="0" cy="0" r="14" fill="#FF91A4"/><circle cx="0" cy="0" r="20" fill="#FF69B4" opacity="0.4"/>
        <circle cx="-12" cy="-12" r="11" fill="#FFB6C1"/><circle cx="12" cy="-12" r="11" fill="#FFB6C1"/>
        <circle cx="-12" cy="12" r="11" fill="#FFB6C1"/><circle cx="12" cy="12" r="11" fill="#FFB6C1"/><circle cx="0" cy="0" r="7" fill="#FF1493"/>
      </g>
      <g transform="translate(650,130)">
        <circle cx="0" cy="0" r="15" fill="#FF91A4"/><circle cx="0" cy="0" r="22" fill="#FF69B4" opacity="0.4"/>
        <circle cx="-13" cy="-13" r="12" fill="#FFB6C1"/><circle cx="13" cy="-13" r="12" fill="#FFB6C1"/>
        <circle cx="-13" cy="13" r="12" fill="#FFB6C1"/><circle cx="13" cy="13" r="12" fill="#FFB6C1"/><circle cx="0" cy="0" r="8" fill="#FF1493"/>
      </g>
      <g transform="translate(780,145)">
        <circle cx="0" cy="0" r="13" fill="#FF91A4"/><circle cx="0" cy="0" r="19" fill="#FF69B4" opacity="0.4"/>
        <circle cx="-11" cy="-11" r="10" fill="#FFB6C1"/><circle cx="11" cy="-11" r="10" fill="#FFB6C1"/>
        <circle cx="-11" cy="11" r="10" fill="#FFB6C1"/><circle cx="11" cy="11" r="10" fill="#FFB6C1"/><circle cx="0" cy="0" r="6" fill="#FF1493"/>
      </g>
    </g>

    <g class="la-dao">
      <ellipse cx="250" cy="170" rx="22" ry="50" fill="#1B5E20" transform="rotate(-45 250 170)"/>
      <ellipse cx="420" cy="120" rx="20" ry="48" fill="#1B5E20" transform="rotate(40 420 120)"/>
      <ellipse cx="600" cy="180" rx="24" ry="52" fill="#1B5E20" transform="rotate(-60 600 180)"/>
    </g>
  </svg>
</div>

<div class="cherry-branch-container branch-right">
  <svg viewBox="0 0 900 300" xmlns="http://www.w3.org/2000/svg" class="hoa-dao sway">
    <defs>
      <linearGradient id="branchThin2" x1="0%" y1="0%" x2="100%" y2="0%">
        <stop offset="0%" stop-color="#4E342E"/>
        <stop offset="50%" stop-color="#5D4037"/>
        <stop offset="100%" stop-color="#6D4C41"/>
      </linearGradient>
    </defs>

    <path d="M50,150 Q250,80 450,150 Q650,220 850,150" stroke="url(#branchThin2)" stroke-width="18" fill="none" stroke-linecap="round"/>
    <path d="M200,140 Q160,100 180,80" stroke="#5D4037" stroke-width="10" fill="none" stroke-linecap="round"/>
    <path d="M350,150 Q310,190 290,210" stroke="#5D4037" stroke-width="9" fill="none" stroke-linecap="round"/>
    <path d="M550,150 Q590,110 570,90" stroke="#5D4037" stroke-width="10" fill="none" stroke-linecap="round"/>
    <path d="M700,155 Q740,195 720,215" stroke="#5D4037" stroke-width="9" fill="none" stroke-linecap="round"/>

    <g class="hoa-dao-group">
      <g transform="translate(150,120)">
        <circle cx="0" cy="0" r="15" fill="#FF91A4"/><circle cx="0" cy="0" r="22" fill="#FF69B4" opacity="0.4"/>
        <circle cx="-13" cy="-13" r="12" fill="#FFB6C1"/><circle cx="13" cy="-13" r="12" fill="#FFB6C1"/><circle cx="-13" cy="13" r="12" fill="#FFB6C1"/><circle cx="13" cy="13" r="12" fill="#FFB6C1"/><circle cx="0" cy="0" r="8" fill="#FF1493"/>
      </g>
      <g transform="translate(300,110)">
        <circle cx="0" cy="0" r="16" fill="#FF91A4"/><circle cx="0" cy="0" r="24" fill="#FF69B4" opacity="0.4"/>
        <circle cx="-14" cy="-14" r="13" fill="#FFB6C1"/><circle cx="14" cy="-14" r="13" fill="#FFB6C1"/><circle cx="-14" cy="14" r="13" fill="#FFB6C1"/><circle cx="14" cy="14" r="13" fill="#FFB6C1"/><circle cx="0" cy="0" r="9" fill="#FF1493"/>
      </g>
      <g transform="translate(480,160)">
        <circle cx="0" cy="0" r="14" fill="#FF91A4"/><circle cx="0" cy="0" r="20" fill="#FF69B4" opacity="0.4"/>
        <circle cx="-12" cy="-12" r="11" fill="#FFB6C1"/><circle cx="12" cy="-12" r="11" fill="#FFB6C1"/><circle cx="-12" cy="12" r="11" fill="#FFB6C1"/><circle cx="12" cy="12" r="11" fill="#FFB6C1"/><circle cx="0" cy="0" r="7" fill="#FF1493"/>
      </g>
      <g transform="translate(650,130)">
        <circle cx="0" cy="0" r="15" fill="#FF91A4"/><circle cx="0" cy="0" r="22" fill="#FF69B4" opacity="0.4"/>
        <circle cx="-13" cy="-13" r="12" fill="#FFB6C1"/><circle cx="13" cy="-13" r="12" fill="#FFB6C1"/><circle cx="-13" cy="13" r="12" fill="#FFB6C1"/><circle cx="13" cy="13" r="12" fill="#FFB6C1"/><circle cx="0" cy="0" r="8" fill="#FF1493"/>
      </g>
      <g transform="translate(780,145)">
        <circle cx="0" cy="0" r="13" fill="#FF91A4"/><circle cx="0" cy="0" r="19" fill="#FF69B4" opacity="0.4"/>
        <circle cx="-11" cy="-11" r="10" fill="#FFB6C1"/><circle cx="11" cy="-11" r="10" fill="#FFB6C1"/><circle cx="-11" cy="11" r="10" fill="#FFB6C1"/><circle cx="11" cy="11" r="10" fill="#FFB6C1"/><circle cx="0" cy="0" r="6" fill="#FF1493"/>
      </g>
    </g>

    <g class="la-dao">
      <ellipse cx="250" cy="170" rx="22" ry="50" fill="#1B5E20" transform="rotate(-45 250 170)"/>
      <ellipse cx="420" cy="120" rx="20" ry="48" fill="#1B5E20" transform="rotate(40 420 120)"/>
      <ellipse cx="600" cy="180" rx="24" ry="52" fill="#1B5E20" transform="rotate(-60 600 180)"/>
    </g>
  </svg>
</div>
    
    <canvas id="fireworks"></canvas>
    <!-- CANVAS FOR PARTICLES -->
    <canvas id="particles-canvas"></canvas>

    <!-- GRADIENT OVERLAY -->
    <div class="gradient-overlay"></div>

    <!-- PARTICLE CONTAINER -->
    <div class="particle-container"></div>

    <!-- LIGHT RAYS -->
    <div class="light-ray" style="animation-delay: 0s;"></div>
    <div class="light-ray" style="animation-delay: 1s;"></div>
    <div class="light-ray" style="animation-delay: 2s;"></div>
    <div class="light-ray" style="animation-delay: 3s;"></div>

    <!-- OVERLAY WITH ENVELOPE -->
    <div id="overlay" class="overlay">
      <div class="envelope-wrapper">
        <div class="envelope-3d">
          <div class="envelope-body">
            <div class="envelope-flap"></div>
            <div class="wax-seal">üíå</div>

            <div class="letter-peek">
              <div class="letter-peek-text">
                "Nh√¢n gian ƒëi l·ªÖ c·∫ßu may,<br />
                Ta ƒëi ch·ªâ ƒë·ªÉ chu·ªëc say..."
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="cta-container">
        <div class="cta-text">‚ú® M·ªü Th∆∞ T√¨nh ‚ú®</div>
        <div class="tap-hint">Ch·∫°m v√†o phong b√¨</div>
      </div>
    </div>

    <!-- AUDIO -->
    <audio id="bgm" loop>
      <source src="./audio.mp3" type="audio/mpeg" />
    </audio>

    <!-- MAIN LETTER -->
    <div class="letter-container">
      <div class="paper">
        <div class="paper-header">
          <div class="paper-decoration">üå∫</div>
          <div class="paper-title">Th∆∞ G·ª≠i Ng∆∞·ªùi T√¥i Y√™u</div>
        </div>
        <div id="text"></div>
        <div id="sig" class="signature">K·∫ª Si T√¨nh</div>
      </div>
    </div>

    <script>
      // --- 1. C·∫§U H√åNH N·ªòI DUNG ---
      const content = `Nh√¢n gian ƒëi l·ªÖ c·∫ßu may,
Ta ƒëi ch·ªâ ƒë·ªÉ chu·ªëc say m·∫Øt n√†ng.

Ch·∫≥ng mong vinh hi·ªÉn gi√†u sang,
Ch·ªâ mong ƒë∆∞·ª£c ch√∫t t√¨nh n√†ng d√†nh cho.

C·∫ßu cho v·∫°n l√Ω b√¨nh y√™n,
C·∫ßu ri√™ng m·ªôt ch·ªØ "T√¨nh" ri√™ng v·ªõi ng∆∞·ªùi...`;

      const textEl = document.getElementById('text');
      const sigEl = document.getElementById('sig');
      const audio = document.getElementById('bgm');
      const overlay = document.getElementById('overlay');
      const letterContainer = document.querySelector('.letter-container');
      const paper = document.querySelector('.paper');

      // --- 2. CANVAS PH√ÅO HOA SI√äU TH·ª∞C, M∆Ø·ª¢T & N·ªî ƒê·ªÄU TOP TR√ÅI - PH·∫¢I - GI·ªÆA ---
      const canvas = document.getElementById('particles-canvas');
      const ctx = canvas.getContext('2d');
      let fireworks = [];
      let particles = [];

      function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      window.addEventListener('resize', resize);
      resize();

      // H·∫°t n·ªÅn c·ª±c nh·∫π
      const bgParticles = [];
      for (let i = 0; i < 25; i++) {
        bgParticles.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          r: Math.random() * 0.6 + 0.3,
          speed: Math.random() * 0.12 + 0.05
        });
      }

      // Particle t·ªëi ∆∞u cao nh·∫•t
      class Particle {
        constructor(x, y, color, vx, vy) {
          this.x = x;
          this.y = y;
          this.color = color;
          this.vx = vx;
          this.vy = vy;
          this.alpha = 1;
          this.trail = [];
        }
        update() {
          this.vx *= 0.99;
          this.vy *= 0.99;
          this.vy += 0.06;

          this.x += this.vx;
          this.y += this.vy;

          this.trail.push({ x: this.x, y: this.y });
          if (this.trail.length > 4) this.trail.shift(); // trail c·ª±c ng·∫Øn

          this.alpha -= 0.025;
        }
        draw() {
          for (let i = 0; i < this.trail.length; i++) {
            ctx.globalAlpha = (i / this.trail.length) * this.alpha * 0.5;
            ctx.fillStyle = this.color;
            ctx.shadowBlur = 5;
            ctx.shadowColor = this.color;
            ctx.fillRect(this.trail[i].x - 0.8, this.trail[i].y - 0.8, 1.6, 1.6);
          }
          ctx.globalAlpha = this.alpha;
          ctx.shadowBlur = 9;
          ctx.shadowColor = this.color;
          ctx.fillStyle = this.color;
          ctx.fillRect(this.x - 1.2, this.y - 1.2, 2.4, 2.4);
        }
        dead() { return this.alpha <= 0; }
      }

      // Firework: v·ªã tr√≠ n·ªï ƒë·ªÅu top tr√°i - ph·∫£i - gi·ªØa, cao tr√™n ƒë·∫ßu
      class Firework {
        constructor() {
          // 3 v·ªã tr√≠ ch√≠nh: tr√°i (20%), gi·ªØa (50%), ph·∫£i (80%)
          const positions = [0.2, 0.5, 0.8];
          const randPos = positions[Math.floor(Math.random() * positions.length)];
          this.x = canvas.width * randPos + (Math.random() - 0.5) * canvas.width * 0.1; // ¬±10% ƒë·ªÉ t·ª± nhi√™n

          this.y = canvas.height;
          // N·ªï r·∫•t cao: t·ª´ 8% ƒë·∫øn 28% t·ª´ ƒë·ªânh m√†n h√¨nh
          this.targetY = canvas.height * 0.08 + Math.random() * canvas.height * 0.20;

          this.speed = 10 + Math.random() * 4;
          const hues = [0, 15, 30, 45, 350]; // m√†u T·∫øt chu·∫©n
          this.color = `hsl(${hues[Math.floor(Math.random() * hues.length)] + Math.random() * 15}, 100%, 65%)`;
          this.trail = [];
        }
        update() {
          this.trail.push({ x: this.x, y: this.y });
          if (this.trail.length > 10) this.trail.shift();

          this.y -= this.speed;
          this.speed *= 0.99;

          if (this.y <= this.targetY) {
            this.explode();
            return false;
          }
          return true;
        }
        draw() {
          // Trail bay l√™n m∆∞·ª£t
          if (this.trail.length > 1) {
            ctx.beginPath();
            ctx.moveTo(this.trail[0].x, this.trail[0].y);
            for (let i = 1; i < this.trail.length; i++) {
              ctx.lineTo(this.trail[i].x, this.trail[i].y);
            }
            ctx.strokeStyle = this.color;
            ctx.lineWidth = 1.8;
            ctx.shadowBlur = 10;
            ctx.shadowColor = this.color;
            ctx.globalAlpha = 0.9;
            ctx.stroke();
          }

          // ƒê·∫ßu ph√°o s√°ng tr·∫Øng
          ctx.globalAlpha = 1;
          ctx.shadowBlur = 15;
          ctx.shadowColor = '#fff';
          ctx.fillStyle = '#fff';
          ctx.beginPath();
          ctx.arc(this.x, this.y, 2.5, 0, Math.PI * 2);
          ctx.fill();
        }
        explode() {
          const count = 55; // s·ªë h·∫°t v·ª´a ƒë·∫πp + m∆∞·ª£t
          for (let i = 0; i < count; i++) {
            const angle = (Math.PI * 2 * i) / count + (Math.random() - 0.5) * 0.3;
            const speed = 3.5 + Math.random() * 5;
            particles.push(new Particle(
              this.x,
              this.y,
              this.color,
              Math.cos(angle) * speed,
              Math.sin(angle) * speed - 1
            ));
          }

          // N·ªï ph·ª• nh·∫π nh√†ng, l·∫•p l√°nh
          setTimeout(() => {
            const subColor = `hsl(${Math.random() < 0.5 ? 50 : 60}, 100%, 78%)`;
            for (let i = 0; i < 30; i++) {
              const angle = Math.random() * Math.PI * 2;
              const speed = 1.5 + Math.random() * 2.5;
              particles.push(new Particle(
                this.x + (Math.random() - 0.5) * 20,
                this.y + (Math.random() - 0.5) * 20,
                subColor,
                Math.cos(angle) * speed,
                Math.sin(angle) * speed
              ));
            }
          }, 200);
        }
      }

      function animate() {
        ctx.fillStyle = 'rgba(10, 5, 5, 0.1)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // H·∫°t n·ªÅn
        ctx.globalAlpha = 0.4;
        ctx.fillStyle = 'rgba(255, 180, 200, 0.4)';
        bgParticles.forEach(p => {
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
          ctx.fill();
          p.y -= p.speed;
          if (p.y < -10) { p.y = canvas.height + 10; p.x = Math.random() * canvas.width; }
        });

        // B·∫Øn ph√°o ƒë·ªÅu ƒë·∫∑n, ƒë·∫πp m·∫Øt khi m·ªü th∆∞
        if (overlay.style.display === 'none' && Math.random() < 0.04) {
          fireworks.push(new Firework());
        }

        fireworks = fireworks.filter(f => {
          f.update();
          f.draw();
          return f.y > f.targetY;
        });

        for (let i = particles.length - 1; i >= 0; i--) {
          const p = particles[i];
          p.update();
          p.draw();
          if (p.dead()) particles.splice(i, 1);
        }

        requestAnimationFrame(animate);
      }
      animate();

      // --- 4. M·ªû TH∆Ø & CH·ªÆ ---
      let charIndex = 0;
      function typeText() {
        if (charIndex < content.length) {
          textEl.innerHTML += content[charIndex] === '\n' ? '<br>' : content[charIndex];
          charIndex++;
          setTimeout(typeText, 70);
        } else {
          sigEl.style.opacity = 1;
        }
      }

      overlay.addEventListener('click', () => {
        overlay.style.transition = 'opacity 1.5s ease';
        overlay.style.opacity = '0';

        setTimeout(() => {
          overlay.style.display = 'none';
          letterContainer.style.display = 'flex';
          paper.style.animation = 'showPaper 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards';
        }, 1500);

        audio.volume = 0;
        audio.play().then(() => {
          let v = 0;
          const fade = setInterval(() => {
            v += 0.03;
            audio.volume = Math.min(v, 0.4);
            if (v >= 0.4) clearInterval(fade);
          }, 80);
        }).catch(() => { });

        setTimeout(typeText, 2500);
      });
      // --- HI·ªÜU ·ª®NG C√ÅNH HOA ƒê√ÄO R·ª§NG ---
function createFallingPetals() {
  const container = document.createElement('div');
  container.className = 'falling-petal-container';
  document.body.appendChild(container);

  const petalHTML = `
    <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">
      <g>
        <circle cx="20" cy="20" r="8" fill="#FF91A4"/>
        <circle cx="20" cy="20" r="12" fill="#FF69B4" opacity="0.6"/>
        <circle cx="13" cy="13" r="9" fill="#FFB6C1"/>
        <circle cx="27" cy="13" r="9" fill="#FFB6C1"/>
        <circle cx="13" cy="27" r="9" fill="#FFB6C1"/>
        <circle cx="27" cy="27" r="9" fill="#FFB6C1"/>
        <circle cx="20" cy="20" r="5" fill="#FF1493"/>
      </g>
    </svg>`;

  function createPetal() {
    const petal = document.createElement('div');
    petal.className = 'falling-petal';
    petal.innerHTML = petalHTML;

    // V·ªã tr√≠ ngang ng·∫´u nhi√™n (∆∞u ti√™n g·∫ßn c√†nh ƒë√†o)
    const left = Math.random() * 100 + '%';
    petal.style.left = left;

    // Th·ªùi gian r∆°i (6-18 gi√¢y)
    const duration = Math.random() * 12 + 6;
    petal.style.animationDuration = duration + 's';

    // ƒê·ªô tr√¥i ngang (bay theo gi√≥)
    const drift = (Math.random() * 200 - 100) + 'px';
    petal.style.setProperty('--drift', drift);

    // ƒê·ªô xoay
    const rotate = Math.random() * 720 + 360 + 'deg';
    petal.style.setProperty('--rotate', rotate);

    // K√≠ch th∆∞·ªõc ng·∫´u nhi√™n m·ªôt ch√∫t
    const scale = Math.random() * 0.5 + 0.8;
    petal.style.transform = `scale(${scale})`;

    container.appendChild(petal);

    // X√≥a sau khi r∆°i xong ƒë·ªÉ kh√¥ng n·∫∑ng b·ªô nh·ªõ
    setTimeout(() => {
      if (petal.parentNode) petal.parentNode.removeChild(petal);
    }, duration * 1000 + 1000);
  }

  // T·∫°o c√°nh hoa li√™n t·ª•c
  setInterval(createPetal, 400); // C·ª© 0.4 gi√¢y t·∫°o 1 c√°nh

  // T·∫°o ban ƒë·∫ßu 30 c√°nh ƒë·ªÉ ƒë·∫πp ngay
  for (let i = 0; i < 10; i++) {
    setTimeout(createPetal, i * 200);
  }
}

// G·ªçi h√†m khi trang load xong (sau khi m·ªü th∆∞ ƒë·ªÉ ƒë·∫πp h∆°n)
window.addEventListener('load', () => {
  setTimeout(createFallingPetals, 3000); // B·∫Øt ƒë·∫ßu sau 3 gi√¢y m·ªü trang
});
      // --- 5. C√ÅNH HOA ---
      function createPetal() {
        const types = ['rose', 'lotus', 'mai'];
        const type = types[Math.floor(Math.random() * types.length)];
        const petal = document.createElement('div');
        petal.className = `petal petal-${type}`;
        petal.style.left = Math.random() * 100 + '%';
        petal.style.animationDuration = (Math.random() * 8 + 10) + 's';
        petal.style.setProperty('--drift', (Math.random() * 200 - 100) + 'px');
        petal.style.setProperty('--rotation', (Math.random() * 720 + 360) + 'deg');
        document.body.appendChild(petal);
        setTimeout(() => petal.remove(), 15000);
      }
      setInterval(createPetal, 800);

      const style = document.createElement('style');
      style.textContent = `
        @keyframes showPaper {
            0% { transform: scale(0.5) rotateY(90deg); opacity: 0; }
            100% { transform: scale(1) rotateY(0deg); opacity: 1; }
        }
    `;
      document.head.appendChild(style);
    </script>
  </body>

  </html>
